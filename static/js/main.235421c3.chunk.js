(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{129:function(e,t,a){e.exports=a(159)},138:function(e,t,a){},139:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(12),c=a.n(i),o=a(13),l=(a(138),a(227)),s=(a(139),a(17)),u=a(48),p=a(19),d=a(20),m=a(22),g=a(21),E=a(4),f=a(214),h="GET_RECIPE_LIST_REQUEST",R="GET_RECIPE_LIST_SUCCESS",b="GET_RECIPE_LIST_ERROR",y="GET_RECIPE_DETAIL_REQUEST",v="GET_RECIPE_DETAIL_SUCCESS",C="GET_RECIPE_DETAIL_ERROR",k="GET_CATEGORY_LIST_SUCCESS",_="ADD_RECIPE_REQUEST",S="ADD_RECIPE_SUCCESS",O="ADD_RECIPE_ERROR",I="UPDATE_RECIPE_REQUEST",L="UPDATE_RECIPE_SUCCESS",j="UPDATE_RECIPE_ERROR",D="DELETE_RECIPE_REQUEST",T="DELETE_RECIPE_SUCCESS",N="DELETE_RECIPE_ERROR",w="FILTER_RECIPE_LIST",x="SELECT_SORTING",P="EDIT_CURRENT_RECIPE",A="SHOW_CONSENT_DIALOG",U="HIDE_CONSENT_DIALOG",z="SHOW_SNACKBAR",F="HIDE_SNACKBAR",G="AUTH_LOGIN",B="AUTH_LOGOUT",K="GET_PROFILE_RECIPE_LIST_REQUEST",W="GET_PROFILE_RECIPE_LIST_SUCCESS",M="GET_PROFILE_RECIPE_LIST_ERROR",J="GET_LIKED_RECIPE_LIST_REQUEST",Q="GET_LIKED_RECIPE_LIST_SUCCESS",H="GET_LIKED_RECIPE_LIST_ERROR",Y="LIKE_RECIPE_REQUEST",q="LIKE_RECIPE_SUCCESS",V="LIKE_RECIPE_ERROR",$="UNLIKE_RECIPE_REQUEST",X="UNLIKE_RECIPE_SUCCESS",Z="UNLIKE_RECIPE_ERROR",ee="LIKE_CURRENT_RECIPE_REQUEST",te="LIKE_CURRENT_RECIPE_SUCCESS",ae="LIKE_CURRENT_RECIPE_ERROR",ne="UNLIKE_CURRENT_RECIPE_REQUEST",re="UNLIKE_CURRENT_RECIPE_SUCCESS",ie="UNLIKE_CURRENT_RECIPE_ERROR",ce="DATE_ASCENDING",oe="DATE_DESCENDING",le=a(96),se=a.n(le).a.create({baseURL:"https://safe-forest-86784.herokuapp.com/api/"}),ue={getRecipeList:function(){return function(e){e({type:h}),se.get("/recipes").then((function(t){e({type:R,data:t.data})})).catch((function(t){e({type:b,error:t,snackbar:"Unable to fetch data."})}))}},getCategoryList:function(){return{type:k,data:["Meat","Salads","Side dishes","Main dishes"]}},getRecipeDetail:function(e){return function(t){t({type:y}),se.get("/recipes/".concat(e)).then((function(e){t({type:v,data:e.data})})).catch((function(e){t({type:C,error:e,snackbar:"Unable to fetch data."})}))}},filterRecipeList:function(e,t){return{type:w,data:{words:e,category:t}}},selectSorting:function(e){return localStorage.setItem("sorting",e),{type:x,data:e}},editCurrentRecipe:function(e){return{type:P,data:e}},updateRecipe:function(e,t,a){return function(n){n({type:I});var r=JSON.parse(localStorage.getItem("auth"));r||n({type:j,data:"Not authorized"}),se.put("/recipes/".concat(e,"/"),t,{headers:{Authorization:r.token}}).then((function(e){n({type:L,data:{recipe:e.data},snackbar:"Successfully updated"}),a()})).catch((function(e){n({type:j,error:e})}))}},deleteRecipe:function(e,t){return function(a){a({type:D});var n=JSON.parse(localStorage.getItem("auth"));n||a({type:N,data:"Not authorized"}),se.delete("/recipes/".concat(e,"/"),{headers:{Authorization:n.token}}).then((function(n){a({type:T,data:{pk:e},snackbar:"Successfully deleted"}),t&&t()})).catch((function(e){a({type:N,error:e})}))}},addRecipe:function(e){return function(t){t({type:_});var a=JSON.parse(localStorage.getItem("auth"));a||t({type:O,data:"Not authorized"}),se.post("/recipes/",e,{headers:{Authorization:a.token}}).then((function(e){t({type:S,data:e.data,snackbar:"Successfully created"})})).catch((function(e){t({type:O,error:e})}))}},getProfileRecipeList:function(){return function(e){e({type:K});var t=JSON.parse(localStorage.getItem("auth"));t||e({type:M,data:"Not authorized"}),se.get("/profile/recipes",{headers:{Authorization:t.token}}).then((function(t){e({type:W,data:t.data})})).catch((function(t){e({type:M,error:t,snackbar:"Unable to fetch data."})}))}},getLikedRecipeList:function(){return function(e){e({type:J});var t=JSON.parse(localStorage.getItem("auth"));t||e({type:H,data:"Not authorized"}),se.get("/profile/liked",{headers:{Authorization:t.token}}).then((function(t){e({type:Q,data:t.data})})).catch((function(t){e({type:H,error:t,snackbar:"Unable to fetch data."})}))}},likeRecipe:function(e,t){return function(a){a({type:Y});var n=JSON.parse(localStorage.getItem("auth"));n||a({type:V,data:"Not authorized"}),se.post("/like",e,{headers:{Authorization:n.token}}).then((function(e){a({type:q,data:t,snackbar:"Added recipe to Liked"})})).catch((function(e){a({type:V,error:e})}))}},unlikeRecipe:function(e,t){return function(a){a({type:$});var n=JSON.parse(localStorage.getItem("auth"));n||a({type:Z,data:"Not authorized"}),se.post("/unlike",e,{headers:{Authorization:n.token}}).then((function(e){a({type:X,data:t,snackbar:"Remove recipe from Liked"})})).catch((function(e){a({type:Z,error:e})}))}},likeCurrentRecipe:function(e,t){return function(a){a({type:ee});var n=JSON.parse(localStorage.getItem("auth"));n||a({type:V,data:"Not authorized"}),se.post("/like",e,{headers:{Authorization:n.token}}).then((function(e){a({type:te,data:t,snackbar:"Added recipe to Liked"})})).catch((function(e){a({type:ae,error:e})}))}},unlikeCurrentRecipe:function(e,t){return function(a){a({type:ne});var n=JSON.parse(localStorage.getItem("auth"));n||a({type:ie,data:"Not authorized"}),se.post("/unlike",e,{headers:{Authorization:n.token}}).then((function(e){a({type:re,data:t,snackbar:"Remove recipe from Liked"})})).catch((function(e){a({type:ie,error:e})}))}}};var pe=a(195),de=a(198),me=a(233),ge=a(199),Ee=a(200),fe=a(201),he=a(34),Re=a(202),be=a(203),ye=a(101),ve=a.n(ye),Ce=a(102),ke=a.n(Ce),_e=a(71),Se=a.n(_e),Oe=a(75),Ie={showConsentDialog:function(e,t){return{type:A,data:{message:e,onSuccess:t}}},hideConsentDialog:function(e){return{type:U,data:e}}};var Le=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.recipe,n=t.classes,i=this.props.likedRecipes.find((function(e){return e._id===a._id})),c=new Date(a.createDate).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",year:"numeric"}),o=this.props.profile._id===a.owner._id;return r.a.createElement(pe.a,{className:n.root},r.a.createElement(de.a,{avatar:r.a.createElement(me.a,{"aria-label":"recipe",className:n.avatar,src:a.owner?a.owner.photo_url:""},"A"),title:a.name,subheader:c}),r.a.createElement(ge.a,{classes:{root:n.actionAreaRoot},component:s.b,to:{pathname:"/recipes/".concat(a._id),state:{recipe:a}}},r.a.createElement(Ee.a,{className:n.media,image:a.photo_url,title:"Paella dish"}),r.a.createElement(fe.a,null,r.a.createElement(he.a,{variant:"body2",color:"textSecondary",component:"p"},a.shortDesc.length>=200?a.shortDesc.substr(0,200)+"...":a.shortDesc))),r.a.createElement(Re.a,{disableSpacing:!0,classes:{root:n.actionsRoot}},o?r.a.createElement(r.a.Fragment,null,r.a.createElement(be.a,{"aria-label":"edit",component:s.b,to:"/edit/".concat(a._id)},r.a.createElement(ve.a,null)),r.a.createElement(be.a,{"aria-label":"delete",onClick:function(){return e.props.showConsentDialog("Do you really want to delete ".concat(a.name,"?"),(function(){return e.props.deleteRecipe(a._id)}))}},r.a.createElement(ke.a,null))):r.a.createElement(r.a.Fragment,null),this.props.profile._id?r.a.createElement(be.a,{"aria-label":"add to favorites",onClick:function(){return i?e.props.unlike({recipeId:a._id},a):e.props.like({recipeId:a._id},a)}},r.a.createElement(Se.a,{className:i?n.liked:n.notLiked})):r.a.createElement(r.a.Fragment,null)))}}]),a}(n.Component);var je={getRecipeList:ue.getRecipeList,like:ue.likeRecipe,unlike:ue.unlikeRecipe,deleteRecipe:ue.deleteRecipe,showConsentDialog:Ie.showConsentDialog},De=Object(u.g)(Object(o.b)((function(e){return{recipes:e.recipes.recipes,likedRecipes:e.profile.likedRecipes,profile:e.auth.user}}),je)(Object(E.a)((function(e){return{root:{maxWidth:345,margin:"auto",display:"flex",flexDirection:"column",height:"100%"},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:Oe.a[500]},actionsRoot:{alignSelf:"flex-end",marginTop:"auto"},actionsRootRight:{alignSelf:"flex-start",marginTop:"auto"},actionAreaRoot:{},liked:{color:"red"},notLiked:{}}}))(Le))),Te=a(79),Ne=a(204),we=a(114),xe=a(207),Pe=a(208),Ae=a(234),Ue=a(211),ze=a(236),Fe=a(230),Ge=a(212),Be=a(213),Ke=a(103),We=a.n(Ke),Me=a(104),Je=a.n(Me),Qe=a(105),He=a.n(Qe),Ye=a(106),qe=a.n(Ye),Ve=Object(Ne.a)((function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"center"},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),$e=Object(E.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return r.a.createElement(we.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"}},e))})),Xe=Object(E.a)((function(e){return{root:{"&:focus":{backgroundColor:e.palette.primary.main,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}}}))(xe.a);var Ze={filterRecipeList:ue.filterRecipeList,selectSorting:ue.selectSorting},et=Object(o.b)((function(e){return{filterTerm:e.recipes.filterTerm,filterCategory:e.recipes.filterCategory,categories:e.recipes.categories,sorting:e.recipes.sorting}}),Ze)((function(e){var t=Ve(),a=e.filterCategory,n=e.filterTerm,i=e.categories,c=r.a.useRef(null),o=r.a.useState(0),l=Object(Te.a)(o,2),s=l[0],u=l[1],p=r.a.useState(null),d=Object(Te.a)(p,2),m=d[0],g=d[1];return r.a.useEffect((function(){u(c.current.offsetWidth)}),[]),r.a.createElement("div",{className:t.root},r.a.createElement(Pe.a,{variant:"outlined",className:t.formControl},r.a.createElement(Ae.a,{label:"",variant:"outlined",placeholder:"Search...",InputProps:{startAdornment:r.a.createElement(Ue.a,{position:"start"},r.a.createElement(We.a,null))},InputLabelProps:{shrink:!1},onChange:function(t){return e.filterRecipeList(t.target.value,a)}})),r.a.createElement(Pe.a,{variant:"outlined",className:t.formControl},r.a.createElement(ze.a,{ref:c,id:"select-outlined-label"},"Category"),r.a.createElement(Fe.a,{labelId:"select-outlined-label",value:a,onChange:function(t){return e.filterRecipeList(n,t.target.value)},labelWidth:s},r.a.createElement(xe.a,{value:""},r.a.createElement("em",null,"None")),i.map((function(e){return r.a.createElement(xe.a,{key:e,value:e},e)})))),r.a.createElement("div",null,r.a.createElement(be.a,{onClick:function(e){return g(e.currentTarget)}},r.a.createElement(Je.a,{style:{float:"right"}})),r.a.createElement($e,{id:"customized-menu",anchorEl:m,open:Boolean(m),onClose:function(e){return g(null)},value:"1"},r.a.createElement(Xe,{value:"1",onClick:function(){return e.selectSorting(oe)},selected:oe===e.sorting},r.a.createElement(Ge.a,null,r.a.createElement(He.a,{fontSize:"small"})),r.a.createElement(Be.a,{primary:"By date descending "})),r.a.createElement(Xe,{value:"2",onClick:function(){return e.selectSorting(ce)},selected:ce===e.sorting},r.a.createElement(Ge.a,null,r.a.createElement(qe.a,{fontSize:"small"})),r.a.createElement(Be.a,{primary:"By date ascending"})))))})),tt=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderRecipes=function(e){return e.map((function(e){return r.a.createElement(f.a,{key:e._id,item:!0,xs:12,md:6,lg:3,xl:2},r.a.createElement(De,{key:e._id,recipe:e}))}))},e.getSort=function(e){switch(e){case oe:return function(e,t){return new Date(t.createDate)-new Date(e.createDate)};case ce:return function(e,t){return new Date(e.createDate)-new Date(t.createDate)};default:return function(e,t){return new Date(t.createDate)-new Date(e.createDate)}}},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.getRecipeList(),this.props.getCategoryList(),this.props.loggedIn&&this.props.getLikedRecipeList()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.recipes,n=e.filterTerm,i=e.filterCategory;return r.a.createElement(f.a,{container:!0,spacing:3,className:t.page},r.a.createElement(f.a,{item:!0,className:t.search},r.a.createElement(et,null)),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(f.a,{container:!0,spacing:3,classes:{root:t.root}},this.renderRecipes(a.sort(this.getSort(this.props.sorting)).filter((function(e){return e.shortDesc.includes(n)||e.longDesc.includes(n)||e.name.includes(n)||e.category.includes(n)})).filter((function(e){return""===i||e.category.includes(i)}))))))}}]),a}(n.Component);var at={filterRecipeList:ue.filterRecipeList,getRecipeList:ue.getRecipeList,getLikedRecipeList:ue.getLikedRecipeList,getCategoryList:ue.getCategoryList},nt=Object(u.g)(Object(o.b)((function(e){return{recipes:e.recipes.recipes,filterTerm:e.recipes.filterTerm,filterCategory:e.recipes.filterCategory,sorting:e.recipes.sorting,loggedIn:e.auth.loggedIn}}),at)(Object(E.a)((function(e){return{root:{display:"flex",margin:"auto"},page:{display:"flex",flexDirection:"column",width:"100%"},search:{},margin:{position:"fixed",bottom:e.spacing(4),right:e.spacing(2)}}}))(tt))),rt=a(47),it=a(215),ct=a(115),ot=a(209),lt=a(237),st=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.getCategoryList()}},{key:"render",value:function(){var e=this.props,t=e.recipe,a=e.categories,n=e.classes,i=this.props;return r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,{component:"h1",variant:"h4",align:"center"},i.title),r.a.createElement(f.a,{container:!0,spacing:3},r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(Ae.a,{required:!0,autoFocus:!0,label:"Name",fullWidth:!0,value:t.name,onChange:function(e){return i.editCurrentRecipe({name:e.target.value})}})),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(Pe.a,{className:n.formControl,fullWidth:!0},r.a.createElement(ze.a,{id:"demo-mutiple-chip-label"},"Category"),r.a.createElement(Fe.a,{labelId:"demo-mutiple-chip-label",id:"demo-mutiple-chip",multiple:!0,value:t.category,onChange:function(e){return i.editCurrentRecipe({category:e.target.value})},input:r.a.createElement(ot.a,{id:"select-multiple-chip"}),renderValue:function(e){return r.a.createElement("div",{className:n.chips},e.map((function(e){return r.a.createElement(lt.a,{key:e,label:e,className:n.chip})})))}},a.map((function(e){return r.a.createElement(xe.a,{key:e,value:e},e)}))))),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(Ae.a,{required:!0,label:"Short description",fullWidth:!0,multiline:!0,rows:"2",value:t.shortDesc,onChange:function(e){return i.editCurrentRecipe({shortDesc:e.target.value})}})),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(Ae.a,{required:!0,fullWidth:!0,label:"Long description",multiline:!0,rows:"10",value:t.longDesc,onChange:function(e){return i.editCurrentRecipe({longDesc:e.target.value})}})),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(Ae.a,{label:"Photo url",fullWidth:!0,value:t.photo_url,onChange:function(e){return i.editCurrentRecipe({photo_url:e.target.value})}})),t.photo_url?r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement("img",{src:t.photo_url,className:n.photo,alt:"Recipe"})):r.a.createElement("div",null)))}}]),a}(n.Component);var ut={editCurrentRecipe:ue.editCurrentRecipe,getCategoryList:ue.getCategoryList},pt=Object(E.a)((function(e){return{photo:{maxWidth:"100px"},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2}}}))(Object(o.b)((function(e){return{recipe:e.profile.currentRecipe,likedRecipes:e.profile.likedRecipes,categories:e.recipes.categories}}),ut)(st)),dt=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={toRecipes:!1},e.onSave=function(){e.props.addRecipe(e.props.recipe),e.setState({toRecipes:!0})},e.onCancel=function(){e.setState({toRecipes:!0})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.editCurrentRecipe({name:"",category:[],photo_url:"",shortDesc:"",longDesc:"",createDate:""})}},{key:"render",value:function(){if(this.state.toRecipes)return r.a.createElement(u.a,{to:"/profile/recipes"});var e=this.props.classes;return r.a.createElement("main",{className:e.layout},r.a.createElement(ct.a,{className:e.paper},r.a.createElement(pt,{title:"Add a new recipe"}),r.a.createElement("div",{className:e.buttons},r.a.createElement(it.a,{className:e.button,onClick:this.onCancel},"Cancel"),r.a.createElement(it.a,{variant:"contained",color:"primary",className:e.button,onClick:this.onSave},"Save"))))}}]),a}(n.Component);var mt={editCurrentRecipe:ue.editCurrentRecipe,addRecipe:ue.addRecipe},gt=Object(u.g)(Object(o.b)((function(e){return{recipe:e.profile.currentRecipe}}),mt)(Object(E.a)((function(e){return{root:{},layout:Object(rt.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},paper:Object(rt.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)})}}))(dt))),Et=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).onSave=function(){n.props.updateRecipe(n.recipeId,n.props.recipe,n.onCancel)},n.onCancel=function(){n.setState({toRecipes:!0})},n.recipeId=n.props.match.params.recipeId,n.state={toRecipes:!1},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;se.get("/recipes/".concat(this.recipeId,"/")).then((function(t){e.props.editCurrentRecipe(t.data)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){if(this.state.toRecipes)return r.a.createElement(u.a,{to:"/profile/recipes"});var e=this.props.classes;return r.a.createElement("main",{className:e.layout},r.a.createElement(ct.a,{className:e.paper},r.a.createElement(pt,{title:"Edit recipe"}),r.a.createElement("div",{className:e.buttons},r.a.createElement(it.a,{className:e.button,onClick:this.onCancel},"Cancel"),r.a.createElement(it.a,{variant:"contained",color:"primary",className:e.button,onClick:this.onSave},"Save"))))}}]),a}(n.Component);var ft={editCurrentRecipe:ue.editCurrentRecipe,updateRecipe:ue.updateRecipe},ht=Object(u.g)(Object(o.b)((function(e){return{recipe:e.profile.currentRecipe}}),ft)(Object(E.a)((function(e){return{root:{},layout:Object(rt.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},paper:Object(rt.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)})}}))(Et))),Rt=a(218),bt=a(107),yt=a(216),vt=a(217),Ct=a(219),kt=a(205),_t=a(220),St=a(206),Ot=a(108),It=a.n(Ot),Lt=a(9),jt={login:function(e,t,a){return function(n){se.post("/login",{tokenId:t}).then((function(t){var r={loggedIn:!0,user:Object(Lt.a)({},e,{_id:t.data._id,liked:t.data.liked||[]}),token:t.data.token};localStorage.setItem("auth",JSON.stringify(r)),n({type:G,data:r}),a&&a()}),(function(e){n({type:z,data:e.toString()})}))}},logout:function(){return localStorage.removeItem("auth"),{type:B}}};var Dt={showSnackbar:function(e){return{type:z,data:e}},hideSnackbar:function(){return{type:F}}};var Tt=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={menu:void 0,isSignedIn:!1},e.successCallback=function(t){var a=t.getBasicProfile(),n={name:a.getName(),photo_url:a.getImageUrl()},r=t.getAuthResponse().id_token;e.props.login(n,r,(function(){e.props.showSnackbar("Signined in as ".concat(n.name)),e.props.getLikedRecipeList()}))},e.errorCallback=function(e){console.log(e)},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.loader;return r.a.createElement(yt.a,{position:"static",elevation:1,className:a.root},r.a.createElement(vt.a,{variant:"dense",position:"static"},r.a.createElement(he.a,{className:a.title,variant:"h6",color:"inherit",component:s.b,to:"/"},"Yummy recipes"),n&&r.a.createElement(Rt.a,{size:36,className:a.fabProgress}),this.props.auth.loggedIn?r.a.createElement("div",null,r.a.createElement(be.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(t){return e.setState({menu:t.currentTarget})},color:"inherit"},this.props.auth.user.photo_url?r.a.createElement(me.a,{src:this.props.auth.user.photo_url}):r.a.createElement(It.a,null)),r.a.createElement(Ct.a,{open:Boolean(this.state.menu),role:void 0,transition:!0,disablePortal:!0,anchorEl:this.state.menu},(function(t){var a=t.TransitionProps,n=t.placement;return r.a.createElement(kt.a,Object.assign({},a,{style:{transformOrigin:"bottom"===n?"center top":"center bottom"}}),r.a.createElement(ct.a,null,r.a.createElement(_t.a,{onClickAway:function(){e.setState({menu:null})}},r.a.createElement(St.a,{id:"menu-list-grow"},r.a.createElement(xe.a,{onClick:function(){e.setState({menu:null})},component:s.b,to:"/profile"},"Profile"),r.a.createElement(xe.a,{onClick:function(){e.props.logout(),e.setState({menu:null})}},"Logout")))))}))):r.a.createElement(bt.GoogleLogin,{clientId:"519594520395-kk3c91nsf94s0kb47j4kgocj8s2104nl.apps.googleusercontent.com",render:function(e){return r.a.createElement(it.a,{color:"inherit",onClick:e.onClick,disabled:e.disabled},"Login")},buttonText:"Login",onSuccess:this.successCallback,onFailure:this.errorCallback,cookiePolicy:"single_host_origin"})))}}]),a}(n.Component);var Nt={login:jt.login,logout:jt.logout,getLikedRecipeList:ue.getLikedRecipeList,showSnackbar:Dt.showSnackbar},wt=Object(u.g)(Object(o.b)((function(e){return{auth:e.auth,loader:e.loader}}),Nt)(Object(E.a)((function(e){return{root:{marginBottom:"10px"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,textAlign:"left"},fabProgress:{color:"white"}}}))(Tt))),xt=a(221),Pt=Object(Ne.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{marginTop:e.spacing(8),marginBottom:e.spacing(2)},footer:{padding:e.spacing(2,1),marginTop:"auto",textAlign:"right",backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[800]}}}));function At(){var e=Pt();return r.a.createElement("footer",{className:e.footer},r.a.createElement("div",null,r.a.createElement(he.a,{variant:"body1"},"The source code and the description of the project can be found  ",r.a.createElement(xt.a,{color:"inherit",href:"https://github.com/mike-kob/YummyRecipe"},"here"),"."),r.a.createElement(he.a,{variant:"body2",color:"textSecondary"},"Copyright \xa9 ",r.a.createElement(xt.a,{color:"inherit",href:"www.linkedin.com/in/michael-kobelev"},"Michael Kobelev")," ",(new Date).getFullYear(),".")))}var Ut=a(228),zt=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={toRecipes:!1},e.handleLike=function(t){var a=e.props.recipe;t?e.props.like({recipeId:a._id},a):e.props.unlike({recipeId:a._id},a)},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.getRecipeDetail(this.props.match.params.recipeId)}},{key:"render",value:function(){var e=this;if(this.state.toRecipes)return r.a.createElement(u.a,{to:"/recipes"});var t=this.props,a=t.classes,n=t.recipe,i=n.owner&&this.props.profile._id===n.owner._id,c=this.props.likedRecipes.find((function(e){return e._id===n._id}));return r.a.createElement(f.a,{container:!0,classes:{root:a.gridRoot}},r.a.createElement(f.a,{item:!0,xs:12,sm:9,xl:6},r.a.createElement(ct.a,{className:a.root},r.a.createElement(he.a,{variant:"h3",style:{padding:"20px"}},n.name),this.props.profile._id?r.a.createElement(be.a,{"aria-label":"add to favorites",className:a.likeButton,onClick:function(){return e.handleLike(!c)}},r.a.createElement(Se.a,{className:c?a.liked:a.notLiked})):r.a.createElement(r.a.Fragment,null),r.a.createElement("hr",null),r.a.createElement(Ut.a,{m:3}),r.a.createElement(he.a,{style:{textAlign:"left",padding:"10px"}},n.shortDesc),r.a.createElement(Ut.a,{m:3}),r.a.createElement("hr",null),r.a.createElement(Ut.a,{m:3}),r.a.createElement("div",null,n.photo_url?r.a.createElement("img",{src:n.photo_url,alt:n.name,width:"30%",style:{margin:"5px",float:"left",padding:"0.5rem"}}):r.a.createElement(r.a.Fragment,null),r.a.createElement(he.a,{style:{overflowWrap:"break-word",textAlign:"left",padding:"10px"}},n.longDesc)),r.a.createElement(Ut.a,{m:5,style:{clear:"both"}}),r.a.createElement("hr",null),r.a.createElement(Ut.a,{m:1}),i?r.a.createElement(r.a.Fragment,null,r.a.createElement(it.a,{variant:"contained",component:s.b,to:"/edit/".concat(n._id),style:{margin:"5px"}},"Edit"),r.a.createElement(it.a,{variant:"contained",color:"secondary",style:{margin:"5px"},onClick:function(){e.props.deleteRecipe(n._id,(function(){e.setState({toRecipes:!0})}))}},"Delete")):r.a.createElement(r.a.Fragment,null))))}}]),a}(n.Component);var Ft={getRecipeDetail:ue.getRecipeDetail,updateRecipe:ue.updateRecipe,deleteRecipe:ue.deleteRecipe,like:ue.likeCurrentRecipe,unlike:ue.unlikeCurrentRecipe,showConsentDialog:Ie.showConsentDialog},Gt=Object(u.g)(Object(o.b)((function(e){return{recipes:e.recipes.recipes,recipe:e.recipes.currentRecipe,likedRecipes:e.profile.likedRecipes,profile:e.auth.user}}),Ft)(Object(E.a)((function(e){return{root:{position:"relative",margin:"auto",maxWidth:"90%"},gridRoot:{justifyContent:"center"},likeButton:{position:"absolute",right:0,top:0},liked:{color:"red"},notLiked:{}}}))(zt))),Bt=a(163),Kt=a(222),Wt=a(162),Mt=a(229),Jt=a(223),Qt=a(224),Ht=a(110),Yt=a.n(Ht),qt=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={current:"recipes"},e.renderRecipes=function(e){return e.map((function(e){return r.a.createElement(f.a,{key:e._id,item:!0,xs:12,md:6,lg:6,xl:6},r.a.createElement(De,{key:e._id,recipe:e,edit:!0}))}))},e.renderMyRecipes=function(){var t=e.props,a=t.classes,n=t.recipes;return r.a.createElement(f.a,{item:!0,xs:12,className:a.main},r.a.createElement(f.a,{container:!0,spacing:3,classes:{root:a.root}},e.renderRecipes(n)))},e.renderFavItem=function(t){var a=e.props.classes;return r.a.createElement(ct.a,{key:t._id,className:a.recipeList},r.a.createElement(Bt.a,{alignItems:"flex-start",component:s.b,to:{pathname:"/recipes/".concat(t._id),state:{recipe:t}}},r.a.createElement(Kt.a,null,r.a.createElement(me.a,{alt:"Remy Sharp",src:t.owner?t.owner.photo_url:""})),r.a.createElement(Be.a,{primary:t.name,secondary:r.a.createElement(r.a.Fragment,null,t.shortDesc)})))},e.renderFavourite=function(){var t=e.props,a=t.classes,n=t.likedRecipes;return r.a.createElement(Wt.a,{className:a.root},n.map(e.renderFavItem))},e.renderContent=function(t){switch(t){case"recipes":return e.renderMyRecipes();case"liked":return e.renderFavourite();default:return r.a.createElement("div",null)}},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.profile._id&&(this.props.getProfileRecipeList(),this.props.getLikedRecipeList())}},{key:"render",value:function(){var e=this;if(!this.props.profile._id)return r.a.createElement(u.a,{to:"/recipes"});var t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ct.a,{className:t.root},r.a.createElement(Mt.a,{value:this.state.current,onChange:function(t,a){return e.setState({current:a})},indicatorColor:"primary",textColor:"primary",centered:!0},r.a.createElement(Jt.a,{label:"My recipes",value:"recipes"}),r.a.createElement(Jt.a,{label:"Favourite recipes",value:"liked"}))),this.renderContent(this.state.current),r.a.createElement(Qt.a,{color:"secondary","aria-label":"add",className:t.margin,component:s.b,to:"/add"},r.a.createElement(Yt.a,null)))}}]),a}(n.Component);var Vt={getProfileRecipeList:ue.getProfileRecipeList,getLikedRecipeList:ue.getLikedRecipeList},$t=Object(E.a)((function(e){return{root:{width:"65%",margin:"0 auto"},main:{width:"65%",margin:"auto",marginTop:e.spacing(4)},margin:{position:"fixed",bottom:e.spacing(12),right:e.spacing(2)},recipeList:{margin:e.spacing(2)}}}))(Object(o.b)((function(e){return{recipes:e.profile.profileRecipes,likedRecipes:e.profile.likedRecipes,profile:e.auth.user}}),Vt)(qt));var Xt=function(){return r.a.createElement(s.a,{basename:"/"},r.a.createElement(wt,null),r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/recipes",component:nt}),r.a.createElement(u.b,{path:"/recipes/:recipeId",component:Gt}),r.a.createElement(u.b,{path:"/add",component:gt}),r.a.createElement(u.b,{path:"/edit/:recipeId",component:ht}),r.a.createElement(u.b,{path:"/profile",component:$t}),r.a.createElement(u.a,{to:"/recipes"}))),r.a.createElement(At,null))},Zt=a(238),ea=a(111),ta=a.n(ea);var aa={showSnackbar:Dt.showSnackbar,hideSnackbar:Dt.hideSnackbar},na=Object(o.b)((function(e){return Object(Lt.a)({},e.snackbar)}),aa)((function(e){return r.a.createElement(Zt.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:e.open,autoHideDuration:3e3,onClose:e.hideSnackbar,message:e.message,action:r.a.createElement(r.a.Fragment,null,r.a.createElement(be.a,{size:"small","aria-label":"close",color:"inherit",onClick:e.hideSnackbar},r.a.createElement(ta.a,{fontSize:"small"})))})})),ra=a(232),ia=a(226),ca=a(225);var oa={showConsentDialog:Ie.showConsentDialog,hideConsentDialog:Ie.hideConsentDialog},la=Object(o.b)((function(e){return Object(Lt.a)({},e.consent)}),oa)((function(e){return!0===e.consent&&(console.log("hey"),e.onSuccess()),r.a.createElement("div",null,r.a.createElement(ra.a,{open:e.open,onClose:function(){return e.hideConsentDialog(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ca.a,{id:"alert-dialog-title"},e.message),r.a.createElement(ia.a,null,r.a.createElement(it.a,{onClick:function(){return e.hideConsentDialog(!1)},color:"secondary"},"No"),r.a.createElement(it.a,{onClick:function(){return e.hideConsentDialog(!0)},color:"primary",autoFocus:!0},"Yes"))))}));var sa=function(){return r.a.createElement("div",{className:"App",style:{display:"flex",flexDirection:"column",minHeight:"100vh"}},r.a.createElement(l.a,null),r.a.createElement(Xt,null),r.a.createElement(na,null),r.a.createElement(la,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ua=a(52),pa=a(112),da=a(113),ma=a(61),ga={recipes:[],categories:[],filterTerm:"",sorting:localStorage.getItem("sorting")||oe,filterCategory:"",message:"",currentRecipe:{name:"",category:[],photo_url:"",shortDesc:"",longDesc:"",createDate:"",likedBy:[]}};var Ea={open:!1,message:"",consent:!1,onSuccess:void 0};var fa={open:!1,message:""};var ha=localStorage.getItem("auth"),Ra=Object(Lt.a)({loggedIn:!1,user:{},token:void 0},JSON.parse(ha));var ba={profileRecipes:[],likedRecipes:[],currentRecipe:{name:"",category:[],photo_url:"",shortDesc:"",longDesc:"",createDate:""}};var ya=Object(ua.c)({recipes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(Lt.a)({},e,{recipes:t.data});case v:return Object(Lt.a)({},e,{currentRecipe:t.data});case k:return Object(Lt.a)({},e,{categories:t.data});case w:return Object(Lt.a)({},e,{filterTerm:t.data.words,filterCategory:t.data.category});case x:return Object(Lt.a)({},e,{sorting:t.data});case L:return Object(Lt.a)({},e,{recipes:[].concat(Object(ma.a)(e.recipes.filter((function(e){return e._id!==t.data.recipe._id}))),[t.data.recipe])});case T:return Object(Lt.a)({},e,{recipes:e.recipes.filter((function(e){return e._id!==t.data.pk}))});case S:return Object(Lt.a)({},e,{recipes:[].concat(Object(ma.a)(e.recipes),[t.data])});default:return e}},consent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ea,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(Lt.a)({},e,{open:!0,message:t.data.message,onSuccess:t.data.onSuccess,consent:!1});case U:return Object(Lt.a)({},e,{open:!1,consent:t.data});default:return e}},snackbar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(Lt.a)({},e,{open:!0,message:t.data});case F:return Object(Lt.a)({},e,{open:!1,message:""});default:return t.snackbar?Object(Lt.a)({},e,{open:!0,message:t.snackbar}):e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ra,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(Lt.a)({},e,{},t.data);case B:return{loggedIn:!1,user:{},token:void 0};default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ba,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Object(Lt.a)({},e,{profileRecipes:t.data});case Q:return Object(Lt.a)({},e,{likedRecipes:t.data});case P:return Object(Lt.a)({},e,{currentRecipe:Object(Lt.a)({},e.currentRecipe,{},t.data)});case T:return Object(Lt.a)({},e,{profileRecipes:e.profileRecipes.filter((function(e){return e._id!==t.data.pk}))});case S:return Object(Lt.a)({},e,{profileRecipes:[].concat(Object(ma.a)(e.profileRecipes),[t.data])});case q:case te:return Object(Lt.a)({},e,{likedRecipes:[].concat(Object(ma.a)(e.likedRecipes),[t.data])});case X:case re:return Object(Lt.a)({},e,{likedRecipes:e.likedRecipes.filter((function(e){return e._id!==t.data._id}))});default:return e}},loader:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return!!t.type.includes("_REQUEST")||!t.type.includes("_SUCCESS")&&(!t.type.includes("_ERROR")&&e)}}),va=Object(da.createLogger)(),Ca=Object(ua.d)(ya,Object(ua.a)(pa.a,va));c.a.render(r.a.createElement(o.a,{store:Ca},r.a.createElement(sa,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[129,1,2]]]);
//# sourceMappingURL=main.235421c3.chunk.js.map